<!DOCTYPE html>
<html>
<head>
  <title>DBMNG Test Suite</title>
  <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.2.min.js"></script>
  <script type="text/javascript" src="dbmng.js"></script>
  <script type="text/javascript" src="inherit_util.js"></script>
</head>
<body>
  <h1>Base</h1>
  <div id="test_base"></div>
  <h1>Botstrap</h1>
  <div id="test_bootstrap"></div>
<h1>test_widget</h1>
  <div id="test_widget"></div>

  <script>

    var options={'value':'Ciao', 'label':'saluto'}; 


    Dbmng.AbstractTheme = Class.extend({      
      getInput: function(options) {
        var el=document.createElement('input');

        el.value=options.value;
        return el;
      },
      getLabel: function(options) {
        var el=document.createElement('div');
        el.classname='dbnmg_label';
        var txt=document.createTextNode(options.label)
        el.appendChild(txt);
        return el;
      },
      getFormInput: function(options){
        var el=document.createElement('div');
        el.appendChild(this.getLabel(options));
        el.appendChild(this.getInput(options));
        return el;
      }
    });

   

    

    Dbmng.BootstrapTheme = Dbmng.AbstractTheme.extend({
      getInput: function(options) {
        var el = this._super(options);
        el.className='form-control';
        return el;
      },
      getLabel: function(options) {
        var el = this._super(options);
        jQuery(el).css('font-weight','bold');
        return el;
      }
    });


    //Test per i temi puri
    var theme=new Dbmng.AbstractTheme();
    jQuery('#test_base').html(theme.getFormInput(options));

    var theme_boot=new Dbmng.BootstrapTheme();
    jQuery('#test_bootstrap').html(theme_boot.getFormInput(options));


    Dbmng.AbstractWidget = Class.extend({  
      createWidget: function(options){
          var aField=options.aField;
          var theme =options.theme;         
          var input={'value':this.getDefaultValue(), 'label':aField.label};
          return theme.getFormInput(input);
      },
      getDefaultValue: function(options){
        return 'vuoto';        
      }      
    });



    Dbmng.NumericWidget = Dbmng.AbstractWidget.extend({  
      getDefaultValue: function(options){
        return 0;        
      }  
    });


    var aForm = { table_name: 'test', 
      primary_key: Array('id'), 
      fields: {
        id: {label: 'ID', type: 'int', key: 0}, 
        name: {label: 'Name', type: 'varchar'} 
      }
    };


   var theme_boot=new Dbmng.BootstrapTheme(); 
   var w1=new Dbmng.AbstractWidget(); 
   jQuery('#test_widget').append(w1.createWidget(
      {theme:theme, aField:aForm.fields.id}
    )); 

   var w2=new Dbmng.NumericWidget(); 
    jQuery('#test_widget').append(w2.createWidget(
      {theme:theme, aField:aForm.fields.name}
    )); 


/*
   
    

    
   

    
    
*/
  </script>
</body>
